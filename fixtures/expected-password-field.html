<ion-input
    label="form[name]"
    name="form[name]"
    value=""
    type="password"
    label-placement="floating"
        class="unbound-password"
        spellcheck="off"
        autocomplete="off"
        maxlength="42"
        toggle-password="toggle-password"
    ></ion-input><ul class="hide-bullets">
    <li><ion-icon class="min-length" name="checkmark-circle"></ion-icon> Min 6 characters</li>
    <li><ion-icon class="max-length" name="checkmark-circle"></ion-icon> Max 42 characters</li>
    <li><ion-icon class="min-special" name="checkmark-circle"></ion-icon> Contains at least 1 of one of these characters: "!@#$%^&amp;*-_+."</li>
      <li><ion-icon class="min-digits" name="checkmark-circle"></ion-icon> Contains at least 1 digits.</li>
      <li><ion-icon class="min-lower" name="checkmark-circle"></ion-icon> Contains at least 1 lower case a-z.</li>
      <li><ion-icon class="min-upper" name="checkmark-circle"></ion-icon> Contains at least 1 upper case A-Z.</li>
  </ul>
<apie-script>
(async function (element) {
  const ul = element.nextElementSibling;
  const specialCharacters = "!@#$%^&*-_+.";
  const allowedCharacters = ('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789' + specialCharacters).split('');
  async function stripUnknownCharacters() {
    await Promise.resolve()
    await Promise.resolve()
    const list = String(element.value ?? '').split('');
    let newValue = '';
    list.forEach(function (character) {
      if (allowedCharacters.indexOf(character) > -1) {
        newValue += character;
      }
    });
    element.value = newValue;
  }
  function updateBullet(elm, condition) {
    if (!elm) {
      return
    }
    if (condition) {
      elm.name = 'checkmark-circle';
      elm.style.color = 'yellowgreen';
    } else {
      elm.name = 'close-circle';
      elm.style.color = 'red';
    }
  }
  function updateBullets() {
    let countSpecial = 0;
    let countDigits = 0;
    let countLower = 0;
    let countUpper = 0;
    String(element.value ?? '').split('').forEach(function (character) {
      if (specialCharacters.split('').indexOf(character) > -1) {
        countSpecial++;
      }
      if ('0123456789'.split('').indexOf(character) > -1) {
        countDigits++;
      }
      if ('abcdefghijklmnopqrstuvwxyz'.split('').indexOf(character) > -1) {
        countLower++;
      }
      if ('ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').indexOf(character) > -1) {
        countUpper++;
      }
    });
    updateBullet(ul.querySelector('.min-length'), String(element.value ?? '').length >= 6);
    updateBullet(ul.querySelector('.max-length'), String(element.value ?? '').length < 42);
    updateBullet(ul.querySelector('.min-special'), countSpecial >= 1);
    updateBullet(ul.querySelector('.min-digits'), countDigits >= 1);
    updateBullet(ul.querySelector('.min-lower'), countLower >= 1);
    updateBullet(ul.querySelector('.min-upper'), countUpper >= 1);
  }
  element.classList.remove('unbound-password');
  element.addEventListener('keydown', function (event) {
    const key = String(event.key);
    if (key.length > 1) {
      return true;
    }
    if (allowedCharacters.indexOf(key) > -1) {
      return true;
    }
    event.stopPropagation();
    event.preventDefault();
    return false;
  });
  element.addEventListener('input', function () {
    stripUnknownCharacters();
    updateBullets();
  });
  element.addEventListener('blur', function () {
    stripUnknownCharacters();
    updateBullets();
  });
  await Promise.resolve();
  await Promise.resolve();
  updateBullets();
})(document.querySelector('.unbound-password'));
</apie-script>